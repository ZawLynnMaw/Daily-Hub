<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Our Daily Hub</title>

<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Segoe UI', sans-serif;
}

body {
    background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
    color: white;
}

/* Login Page */
#loginPage {
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
}

.login-box {
    background: rgba(255,255,255,0.1);
    padding: 40px;
    border-radius: 15px;
    backdrop-filter: blur(10px);
    width: 300px;
    text-align: center;
}

.login-box h2 {
    margin-bottom: 20px;
}

.login-box input {
    width: 100%;
    padding: 10px;
    margin: 10px 0;
    border: none;
    border-radius: 8px;
}

.login-box button {
    width: 100%;
    padding: 10px;
    border: none;
    border-radius: 8px;
    background: #00c6ff;
    color: white;
    font-weight: bold;
    cursor: pointer;
    transition: 0.3s;
}

.login-box button:hover {
    background: #0072ff;
}

/* Dashboard */
#dashboard {
    display: none;
}

nav {
    background: rgba(0,0,0,0.3);
    padding: 15px;
    display: flex;
    justify-content: space-around;
}

nav button {
    background: transparent;
    border: 2px solid white;
    padding: 8px 15px;
    color: white;
    border-radius: 8px;
    cursor: pointer;
    transition: 0.3s;
}

nav button:hover {
    background: white;
    color: black;
}

.section {
    padding: 30px;
    display: none;
}

.active {
    display: block;
}

.card {
    background: rgba(255,255,255,0.1);
    padding: 20px;
    border-radius: 15px;
    margin-top: 15px;
}

input, textarea {
    width: 100%;
    padding: 8px;
    margin-top: 10px;
    border-radius: 8px;
    border: none;
}

.add-btn {
    margin-top: 10px;
    padding: 8px;
    background: #00ff99;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
}

ul {
    margin-top: 10px;
}
</style>
</head>

<body>

<!-- LOGIN PAGE -->
<div id="loginPage">
    <div class="login-box">
        <h2>Daily Hub</h2>
        <input type="text" id="username" placeholder="Username">
        <input type="password" id="password" placeholder="Password">
        <button onclick="login()">Login</button>
        <p id="error" style="color:red;margin-top:10px;"></p>
    </div>
</div>

<!-- DASHBOARD -->
<div id="dashboard">

<nav>
    <button onclick="showSection('schedule')">ðŸ“… Schedule</button>
    <button onclick="showSection('task')">âœ… Task</button>
    <button onclick="showSection('money')">ðŸ’° Money Saving</button>
    <button onclick="logout()">Logout</button>
</nav>

<div id="schedule" class="section active">
    <h2>Schedule</h2>
    <div class="card">
        <input type="text" id="titleInput" placeholder="Enter Title">
        <input type="date" id="dateInput">

        <select id="typeInput">
            <option value="Schedule">Schedule</option>
            <option value="Task">Task</option>
            <option value="Money">Money Saving</option>
        </select>

        <button class="add-btn" onclick="addRecord()">Add</button>
    </div>

    <div class="card">
        <button onclick="filterData('all')">All</button>
        <button onclick="filterData('today')">Today</button>
        <button onclick="filterData('month')">This Month</button>

        <ul id="recordList"></ul>
    </div>
</div>

<div id="task" class="section">
    <h2>Task</h2>
    <div class="card">
        <input type="text" id="titleInput" placeholder="Enter Title">
        <input type="date" id="dateInput">

        <select id="typeInput">
            <option value="Schedule">Schedule</option>
            <option value="Task">Task</option>
            <option value="Money">Money Saving</option>
        </select>

        <button class="add-btn" onclick="addRecord()">Add</button>
    </div>

    <div class="card">
        <button onclick="filterData('all')">All</button>
        <button onclick="filterData('today')">Today</button>
        <button onclick="filterData('month')">This Month</button>

        <ul id="recordList"></ul>
    </div>
</div>

<div id="money" class="section">
    <h2>Money Saving</h2>
    <div class="card">
        <input type="text" id="titleInput" placeholder="Enter Title">
        <input type="date" id="dateInput">

        <select id="typeInput">
            <option value="Schedule">Schedule</option>
            <option value="Task">Task</option>
            <option value="Money">Money Saving</option>
        </select>

        <button class="add-btn" onclick="addRecord()">Add</button>
    </div>

    <div class="card">
        <button onclick="filterData('all')">All</button>
        <button onclick="filterData('today')">Today</button>
        <button onclick="filterData('month')">This Month</button>

        <ul id="recordList"></ul>
    </div>
</div>

<script>
// Login system
function login() {
    let user = document.getElementById("username").value;
    let pass = document.getElementById("password").value;

    // Matches your requested credentials
    if(user === "Mptzzlm" && pass === "aishiteru") {
        document.getElementById("loginPage").style.display = "none";
        document.getElementById("dashboard").style.display = "block";
        loadData("all"); // Ensure data loads after login
    } else {
        document.getElementById("error").innerText = "Invalid username or password";
    }
}

// Logout
function logout() {
    location.reload();
}

// Section switch
function showSection(sectionId) {
    let sections = document.querySelectorAll(".section");
    sections.forEach(sec => sec.classList.remove("active"));
    document.getElementById(sectionId).classList.add("active");
}

let editIndex = -1;

// Unified Add Record Function
function addRecord() {
    // Note: This picks the inputs from the CURRENT active section
    let activeSection = document.querySelector('.section.active');
    let title = activeSection.querySelector("#titleInput").value;
    let date = activeSection.querySelector("#dateInput").value;
    let type = activeSection.querySelector("#typeInput").value;

    if(title.trim() === "" || date === "") {
        alert("Please fill in all fields");
        return;
    }

    let records = JSON.parse(localStorage.getItem("records")) || [];

    if(editIndex === -1) {
        records.push({title, date, type});
    } else {
        records[editIndex] = {title, date, type};
        editIndex = -1;
    }

    localStorage.setItem("records", JSON.stringify(records));

    // Clear inputs in active section
    activeSection.querySelector("#titleInput").value = "";
    activeSection.querySelector("#dateInput").value = "";

    loadData("all");
}

function loadData(filter) {
    let records = JSON.parse(localStorage.getItem("records")) || [];
    let today = new Date().toISOString().split("T")[0];
    let thisMonth = today.substring(0,7);

    // Update ALL lists across all sections
    let lists = document.querySelectorAll("#recordList");
    
    lists.forEach(list => {
        list.innerHTML = "";
        records.forEach((item, index) => {
            if(filter === "today" && item.date !== today) return;
            if(filter === "month" && !item.date.startsWith(thisMonth)) return;

            let li = document.createElement("li");
            li.style.listStyle = "none";
            li.style.padding = "10px 0";
            li.innerHTML = `
                <b>[${item.type}]</b> ${item.title} â€” <i>${item.date}</i>
                <button onclick="editRecord(${index})" style="margin-left:10px; cursor:pointer;">Edit</button>
                <button onclick="deleteRecord(${index})" style="color:red; cursor:pointer;">Delete</button>
            `;
            list.appendChild(li);
        });
    });
}

function deleteRecord(index) {
    let records = JSON.parse(localStorage.getItem("records")) || [];
    records.splice(index, 1);
    localStorage.setItem("records", JSON.stringify(records));
    loadData("all");
}

function editRecord(index) {
    let records = JSON.parse(localStorage.getItem("records")) || [];
    let activeSection = document.querySelector('.section.active');

    activeSection.querySelector("#titleInput").value = records[index].title;
    activeSection.querySelector("#dateInput").value = records[index].date;
    activeSection.querySelector("#typeInput").value = records[index].type;

    editIndex = index;
}

function filterData(type) {
    loadData(type);
}
</script>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-analytics.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDLHBbVIsr4mu8PhnWM_n4XHuxJsGkiOpE",
    authDomain: "zaw--lynn-maw.firebaseapp.com",
    projectId: "zaw--lynn-maw",
    storageBucket: "zaw--lynn-maw.firebasestorage.app",
    messagingSenderId: "618191013506",
    appId: "1:618191013506:web:2ba52ea74b6cbda0db969b",
    measurementId: "G-BKYBXB6PGQ"
  };

  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
</script>

</body>
</html>
